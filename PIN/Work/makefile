##############################################################
#
#                   DO NOT EDIT THIS FILE!
#
##############################################################

# If the tool is built out of the kit, PIN_ROOT must be specified in the make invo#cation and point to the kit root.

PIN_ROOT := $(shell cd ../PIN && pwd)
CONFIG_ROOT := $(PIN_ROOT)/source/tools/Config
include $(CONFIG_ROOT)/makefile.config
include makefile.rules
include $(CONFIG_ROOT)/makefile.default.rules

CC := gcc
CXX := g++
CFLAGS := -g -pthread
CXXFLAGS := -g -pthread

.SECONDARY:
memtracker.cpp: memtracker.h
	@touch memtracker.cpp
%.out: %.c
	$(CC) $(CFLAGS) $< -o $@
# %.out: %.cpp
# 	$(CXX) $(CXXFLAGS) $< -o $@
# %_clang.xml: %.cpp parser.py
# 	python parser.py $<
# %_clang.xml: %.c parser.py
# 	python parser.py $<
# %.dwarfdump: %.out
# 	dwarfdump $< > $@
# %_dwarfdump.xml: %.dwarfdump dwarfdump_parser.py
# 	python dwarfdump_parser.py $<
# %_combined.xml:  %_dwarfdump.xml %_clang.xml combine.py
# 	python combine.py $< $(word 2, $^)
# %_combined.offset %_combined.func: %_combined.xml
# 	python linkerHelper.py $<
%.dump: %.out ./obj-intel64/memtracker.so
	../PIN/pin -t obj-intel64/memtracker.so -- ./$< > /dev/null
%.dxml: %.dump dump2dxml.py
	python dump2dxml.py $<
%_final.xml: %_combined.xml %.dxml combine_static_dynamic.py
	python combine_static_dynamic.py $< $(word 2, $^)
%.ttl: %_final.xml ttl_from_xml.py
	python ttl_from_xml.py $<
testing: spandan_sample1_final.xml
cleaner:
	-rm *.dwarfdump *.xml *.dxml *.ttl *.offset *.func *.dump *.o
	make clean

##############################################################
#
#                   DO NOT EDIT THIS FILE!
#
##############################################################
